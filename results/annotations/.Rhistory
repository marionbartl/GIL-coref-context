library(irr)
library(dplyr)
# set working directory
setwd('/home/marion/Documents/UCD/Projects/testing/data/annotations')
a1 <- read.csv('annotator_1.csv')
a2 <- read.csv('annotator_2.csv')
a3 <- read.csv('annotator_3.csv')
colnames(a1)[colnames(a1) == "refers.back."] <- "coreference"
colnames(a2)[colnames(a2) == "refers.back."] <- "coreference"
colnames(a3)[colnames(a3) == "refers.back."] <- "coreference"
# Select only annotation columns and rename with annotator identifiers
a1_annotations <- a1[, c("mentioned.gender", "coreference")]
colnames(a1_annotations) <- paste0(colnames(a1_annotations), "_a1")
a2_annotations <- a2[, c("mentioned.gender", "coreference")]
colnames(a2_annotations) <- paste0(colnames(a2_annotations), "_a2")
a3_annotations <- a3[, c("mentioned.gender", "coreference")]
colnames(a3_annotations) <- paste0(colnames(a3_annotations), "_a3")
# Combine the dataframes
combined <- cbind(a1_annotations, a2_annotations, a3_annotations)
# gender col
combined %>% select(1,3,5) %>% kappam.fleiss
# coreference col
combined %>% select(2,4,6) %>% kappam.fleiss
# Function to calculate the majority rating
majority_rating <- function(row) {
as.numeric(names(which.max(table(row))))
}
# Calculate majority for col1 and col2
majority_df <- combined %>%
rowwise() %>%
mutate(
majority_col1 = majority_rating(c_across(starts_with("mentioned.gender"))),
majority_col2 = majority_rating(c_across(starts_with("coreference")))
) %>%
ungroup() %>%
select(majority_col1, majority_col2)
View(combined)
merged_df <- bind_cols(
df1 %>% select(col1),  # Select columns from df1
df2 %>% select(col3)   # Select columns from df2
)
# Calculate majority for col1 and col2
majority_df <- combined %>%
rowwise() %>%
mutate(
majority_col1 = majority_rating(c_across(starts_with("mentioned.gender"))),
majority_col2 = majority_rating(c_across(starts_with("coreference")))
) %>%
ungroup() %>%
select(majority_col1, majority_col2)
merged_df <- bind_cols(
df1 %>% select(col1),  # Select columns from df1
df2 %>% select(col3)   # Select columns from df2
)
# View the result
print(merged_df)
View(combined)
# set working directory
setwd('/home/marion/Documents/UCD/Projects/testing/data/annotations')
combined = read.csv('data/annotations/annotations_EN_majorityvotes.csv')
combined = read.csv('annotations_EN_majorityvotes.csv')
# gender col
combined %>% select(1,3,5) %>% kappam.fleiss
library(irr)
library(dplyr)
# set working directory
setwd('/home/marion/Documents/UCD/Projects/testing/data/annotations')
combined = read.csv('annotations_EN_majorityvotes.csv')
# gender col
combined %>% select(6,8,10) %>% kappam.fleiss
# coreference col
combined %>% select(7,9,11) %>% kappam.fleiss
table(next_data$ante_gender, next_data$gender_mv)
table(combined$ante_gender, combined$gender_mv)
library(ggplot2)
ggplot(combined) +
aes(x = ante_gender, fill = next_gender) +
geom_bar(position = "dodge")+
#scale_fill_brewer(palette = "Accent") +
labs(title = "Olmo 1B (4bit) - High Frequency Antecedents - PL")
ggplot(combined) +
aes(x = ante_gender, fill = gender_mv) +
geom_bar(position = "dodge")+
#scale_fill_brewer(palette = "Accent") +
labs(title = "Olmo 1B (4bit) - High Frequency Antecedents - PL")
ggplot(combined %>% filter(if_all(everything(), ~ !is.na(.)))) +
aes(x = ante_gender, fill = gender_mv) +
geom_bar(position = "dodge")+
#scale_fill_brewer(palette = "Accent") +
labs(title = "Olmo 1B (4bit) - High Frequency Antecedents - PL")
ggplot(combined) +
aes(x = ante_gender, fill = gender_mv) +
geom_bar(position = "dodge")+
#scale_fill_brewer(palette = "Accent") +
labs(title = "Olmo 1B (4bit) - High Frequency Antecedents - PL")
combined = read.csv('annotations_EN_majorityvotes.csv')
# gender col
combined %>% select(6,8,10) %>% kappam.fleiss
# coreference col
combined %>% select(7,9,11) %>% kappam.fleiss
table(combined$ante_gender, combined$gender_mv)
ggplot(combined) +
aes(x = ante_gender, fill = gender_mv) +
geom_bar(position = "dodge")+
#scale_fill_brewer(palette = "Accent") +
labs(title = "Olmo 1B (4bit) - High Frequency Antecedents - PL")
test <- chisq.test(table(combined$ante_gender, combined$gender_mv))
test
ggplot(combined) +
aes(x = ante_gender, fill = gender_mv) +
geom_bar(position = "dodge")+
#scale_fill_brewer(palette = "Accent") +
#labs(title = "Olmo 1B (4bit) - High Frequency Antecedents - PL")+
geom_text(aes(label = count), vjust = -0.5)
ggplot(combined) +
aes(x = ante_gender, fill = gender_mv) +
geom_bar(position = "dodge")+
#scale_fill_brewer(palette = "Accent") +
#labs(title = "Olmo 1B (4bit) - High Frequency Antecedents - PL")
test <- chisq.test(table(combined$ante_gender, combined$gender_mv))
ggplot(combined) +
aes(x = ante_gender, fill = gender_mv) +
geom_bar(position = "dodge")
ggplot(combined) +
aes(x = ante_gender, fill = gender_mv) +
geom_bar(stat = count, position = "dodge")
ggplot(combined) +
aes(x = ante_gender, fill = gender_mv) +
geom_bar(stat = "count", position = "dodge")
ggplot(combined) +
aes(x = ante_gender, fill = gender_mv) +
geom_bar(stat = "count")
ggplot(combined) +
aes(x = ante_gender, fill = gender_mv) +
geom_text(stat = "count")
ggplot(combined) +
aes(x = ante_gender, fill = gender_mv) +
geom_bar()+
geom_text(stat = "count")
# Bar chart with counts displayed on top
ggplot(combined, aes(x = ante_gender, fill = gender_mv)) +
geom_bar(fill = "skyblue") +  # Bar chart with automatic counts
geom_text(stat = "count", aes(label = ..count..), vjust = -0.5) +  # Add counts on top
labs(x = "Category", y = "Count", title = "Bar Chart with Counts") +
theme_minimal()
# Bar chart with counts displayed on top
ggplot(combined, aes(x = ante_gender, fill = gender_mv)) +
geom_text(stat = "count", aes(label = ..count..), vjust = -0.5) +  # Add counts on top
labs(x = "Category", y = "Count", title = "Bar Chart with Counts") +
theme_minimal()
# Bar chart with counts displayed on top
ggplot(combined, aes(x = ante_gender, fill = gender_mv)) +
geom_bar(fill = gender_mv) +  # Bar chart with automatic counts
geom_text(stat = "count", aes(label = ..count..), vjust = -0.5) +  # Add counts on top
labs(x = "Category", y = "Count", title = "Bar Chart with Counts") +
theme_minimal()
# Bar chart with counts displayed on top
ggplot(combined, aes(x = ante_gender)) +
geom_bar(fill = gender_mv) +  # Bar chart with automatic counts
geom_text(stat = "count", aes(label = ..count..), vjust = -0.5) +  # Add counts on top
labs(x = "Category", y = "Count", title = "Bar Chart with Counts") +
theme_minimal()
# Bar chart with counts displayed on top
ggplot(combined, aes(x = ante_gender,fill = gender_mv)) +
geom_bar(position = 'dodge') +  # Bar chart with automatic counts
geom_text(stat = "count", aes(label = ..count..), vjust = -0.5) +  # Add counts on top
labs(x = "Category", y = "Count", title = "Bar Chart with Counts") +
theme_minimal()
# Bar chart with counts displayed on top
ggplot(combined, aes(x = ante_gender,fill = gender_mv)) +
geom_bar(position = 'dodge') +  # Bar chart with automatic counts
geom_text(stat = "count", aes(label = ..count..),
position = position_dodge(width = 0.9), vjust = -0.5) +  # Text for each group
labs(x = "Category", y = "Count", title = "Side-by-Side Bar Chart with Counts") +
theme_minimal()
# Bar chart with counts displayed on top
ggplot(combined, aes(x = ante_gender,fill = gender_mv)) +
geom_bar() +  # Bar chart with automatic counts
geom_text(stat = "count", aes(label = ..count..), vjust = -0.5) +  # Add counts on top
labs(x = "Category", y = "Count", title = "Bar Chart with Counts") +
theme_minimal()
# Bar chart with counts displayed on top
ggplot(combined, aes(x = ante_gender,fill = gender_mv)) +
geom_bar(position = "dodge") +  # Bar chart with automatic counts
geom_text(stat = "count", aes(label = ..count..),
position = position_dodge(width = 0.9), vjust = -0.5) +  # Text for each group
labs(x = "Category", y = "Count", title = "Side-by-Side Bar Chart with Counts") +
theme_minimal()
# Bar chart with counts displayed on top
ggplot(combined, aes(x = ante_gender,fill = gender_mv)) +
geom_bar(position = "dodge") +  # Bar chart with automatic counts
geom_text(stat = "count", aes(label = ..count..),
position = position_dodge(width = 0.9), vjust = -0.5) +  # Text for each group
labs(x = "Antecedent Gender", y = "Count", title = "Predicted gender by antecedent gender") +
theme_minimal()
?labs
?geom_bar
# Bar chart with counts displayed on top
ggplot(combined, aes(x = ante_gender,fill = gender_mv)) +
geom_bar(position = "stack") +  # Bar chart with automatic counts
# geom_text(stat = "count", aes(label = ..count..),
#           position = position_dodge(width = 0.9), vjust = -0.5) +  # Text for each group
geom_text(stat = "count", aes(label = ..count..), vjust = -0.5) +  # Add counts on top
labs(x = "antecedent gender", y = "count", title = "Predicted gender by antecedent gender") +
theme_minimal()
# Bar chart with counts displayed on top
ggplot(combined, aes(x = ante_gender,fill = gender_mv)) +
geom_bar(position = "stack") +  # Bar chart with automatic counts
# geom_text(stat = "count", aes(label = ..count..),
#           position = position_dodge(width = 0.9), vjust = -0.5) +  # Text for each group
geom_text(stat = "count", aes(label = ..count..)) +  # Add counts on top
labs(x = "antecedent gender", y = "count", title = "Predicted gender by antecedent gender") +
theme_minimal()
